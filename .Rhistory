# P is predict matrix
P = R + User_Similarity %*% (UI2-R) /apply(abs(User_Similarity),1,sum);
D = P - UI;
RMSE = sum(apply(D*D,1,function(x) sum(x[!is.na(x)])))/sum(!is.na(D)*1)
result = list(predict = P,RMSE = RMSE);
return (result);
}
P = UBCF(UI);
P$predict
P$RMSE
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
UI2 = UI;
UI2[is.na(UI2)] = 0;
UI
tcrossprod(UI2)
v %*% t(v)
User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
v = sqrt(apply(UI2*UI2,1,sum));
User_Similarity = tcrossprod(UI2)/v %*% t(v);
User_Similarity
v = sqrt(apply(UI2*UI2,1,sum));
User_Similarity = tcrossprod(UI2);
User_Similarity
UI2
install.packages("dist")
K
UBCF <- function(UI){
#User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
User_Similarity = as.matrix(1/dist(UI))
User_Similarity[is.infinite(User_Similarity)] = 0;
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity = tcrossprod(UI2);
UI2 = UI;
UI2[is.na(UI2)] = 0;
#User_Similarity = as.matrix(1/dist(UI2));
count = apply(UI2, 1, function(x) sum(x!=0)) - (UI2!=0)*1;
sum_user_rate_other = apply(UI2, 1, function(x) sum(x[x!=0])) - UI2;
R = sum_user_rate_other / count;
#remove trace of similarity matrix
for(i in c(1:dim(User_Similarity)[1])) { User_Similarity[i,i]=0; }
User_Similarity[is.na(User_Similarity)] = 0;
#User_Similarity = User_Similarity*abs(User_Similarity)**1.5
# P is predict matrix
P = R + User_Similarity %*% (UI2-R) /apply(abs(User_Similarity),1,sum);
D = P - UI;
RMSE = sum(apply(D*D,1,function(x) sum(x[!is.na(x)])))/sum(!is.na(D)*1)
result = list(predict = P,RMSE = RMSE);
return (result);
}
P = UBCF(UI);
P$predict
P$RMSE
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
UI2 = UI;
UI2[is.na(UI2)] = 0;
UI
tcrossprod(UI2)
v %*% t(v)
User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
v = sqrt(apply(UI2*UI2,1,sum));
User_Similarity = tcrossprod(UI2)/v %*% t(v);
User_Similarity
v = sqrt(apply(UI2*UI2,1,sum));
User_Similarity = tcrossprod(UI2);
User_Similarity
UBCF <- function(UI){
#User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
User_Similarity = as.matrix(1/dist(UI))
User_Similarity[is.infinite(User_Similarity)] = 0;
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity = tcrossprod(UI2);
UI2 = UI;
UI2[is.na(UI2)] = 0;
#User_Similarity = as.matrix(1/dist(UI2));
count = apply(UI2, 1, function(x) sum(x!=0)) - (UI2!=0)*1;
sum_user_rate_other = apply(UI2, 1, function(x) sum(x[x!=0])) - UI2;
R = sum_user_rate_other / count;
#remove trace of similarity matrix
for(i in c(1:dim(User_Similarity)[1])) { User_Similarity[i,i]=0; }
User_Similarity[is.na(User_Similarity)] = 0;
#User_Similarity = User_Similarity*abs(User_Similarity)**1.5
# P is predict matrix
P = R + User_Similarity %*% (UI2-R) /apply(abs(User_Similarity),1,sum);
D = P - UI;
RMSE = sum(apply(D*D,1,function(x) sum(x[!is.na(x)])))/sum(!is.na(D)*1)
result = list(predict = P,RMSE = RMSE);
return (result);
}
P = UBCF(UI);
P$predict
P$RMSE
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
#UI2 = UI;
#UI2[is.na(UI2)] = 0;
#UI
#tcrossprod(UI2)
#v %*% t(v)
#User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2);
#User_Similarity
UBCF <- function(UI){
#User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
#User_Similarity = as.matrix(1/dist(UI))
#User_Similarity[is.infinite(User_Similarity)] = 0;
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity = tcrossprod(UI2);
UI2 = UI;
UI2[is.na(UI2)] = 0;
#User_Similarity = as.matrix(1/dist(UI2));
count = apply(UI2, 1, function(x) sum(x!=0)) - (UI2!=0)*1;
sum_user_rate_other = apply(UI2, 1, function(x) sum(x[x!=0])) - UI2;
R = sum_user_rate_other / count;
#remove trace of similarity matrix
for(i in c(1:dim(User_Similarity)[1])) { User_Similarity[i,i]=0; }
User_Similarity[is.na(User_Similarity)] = 0;
#User_Similarity = User_Similarity*abs(User_Similarity)**1.5
# P is predict matrix
P = R + User_Similarity %*% (UI2-R) /apply(abs(User_Similarity),1,sum);
D = P - UI;
RMSE = sum(apply(D*D,1,function(x) sum(x[!is.na(x)])))/sum(!is.na(D)*1)
result = list(predict = P,RMSE = RMSE,Similarity=User_Similarity);
return (result);
}
P = UBCF(UI);
P$predict
P$RMSE
P$Similarity
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
#UI2 = UI;
#UI2[is.na(UI2)] = 0;
#UI
#tcrossprod(UI2)
#v %*% t(v)
#User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2);
#User_Similarity
UBCF <- function(UI){
User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
#User_Similarity = as.matrix(1/dist(UI))
#User_Similarity[is.infinite(User_Similarity)] = 0;
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity = tcrossprod(UI2);
UI2 = UI;
UI2[is.na(UI2)] = 0;
#User_Similarity = as.matrix(1/dist(UI2));
count = apply(UI2, 1, function(x) sum(x!=0)) - (UI2!=0)*1;
sum_user_rate_other = apply(UI2, 1, function(x) sum(x[x!=0])) - UI2;
R = sum_user_rate_other / count;
#remove trace of similarity matrix
for(i in c(1:dim(User_Similarity)[1])) { User_Similarity[i,i]=0; }
User_Similarity[is.na(User_Similarity)] = 0;
#User_Similarity = User_Similarity*abs(User_Similarity)**1.5
# P is predict matrix
P = R + User_Similarity %*% (UI2-R) /apply(abs(User_Similarity),1,sum);
D = P - UI;
RMSE = sum(apply(D*D,1,function(x) sum(x[!is.na(x)])))/sum(!is.na(D)*1)
result = list(predict = P,RMSE = RMSE,Similarity=User_Similarity);
return (result);
}
P = UBCF(UI);
P$predict
P$RMSE
P$Similarity
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
#UI2 = UI;
#UI2[is.na(UI2)] = 0;
#UI
#tcrossprod(UI2)
#v %*% t(v)
#User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2);
#User_Similarity
UBCF <- function(UI){
User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
#User_Similarity = as.matrix(1/dist(UI))
#User_Similarity[is.infinite(User_Similarity)] = 0;
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity = tcrossprod(UI2);
UI2 = UI;
UI2[is.na(UI2)] = 0;
#User_Similarity = as.matrix(1/dist(UI2));
count = apply(UI2, 1, function(x) sum(x!=0)) - (UI2!=0)*1;
sum_user_rate_other = apply(UI2, 1, function(x) sum(x[x!=0])) - UI2;
R = sum_user_rate_other / count;
#remove trace of similarity matrix
for(i in c(1:dim(User_Similarity)[1])) { User_Similarity[i,i]=0; }
User_Similarity[is.na(User_Similarity)] = 0;
#User_Similarity = User_Similarity*abs(User_Similarity)**1.5
# P is predict matrix
P = R + User_Similarity %*% (UI2-R) /apply(abs(User_Similarity),1,sum);
D = P - UI;
RMSE = sum(apply(D*D,1,function(x) sum(x[!is.na(x)])))/sum(!is.na(D)*1)
result = list(predict = P,RMSE = RMSE,Similarity=User_Similarity);
return (result);
}
P = UBCF(UI);
P$predict
P$RMSE
P$Similarity
UI
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
#UI2 = UI;
#UI2[is.na(UI2)] = 0;
#UI
#tcrossprod(UI2)
#v %*% t(v)
#User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2);
#User_Similarity
UBCF <- function(UI,W){
#User_Similarity = as.matrix(1/dist(UI))
#User_Similarity[is.infinite(User_Similarity)] = 0;
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity = tcrossprod(UI2);
UI2 = UI;
UI2[is.na(UI2)] = 0;
#User_Similarity = as.matrix(1/dist(UI2));
count = apply(UI2, 1, function(x) sum(x!=0)) - (UI2!=0)*1;
sum_user_rate_other = apply(UI2, 1, function(x) sum(x[x!=0])) - UI2;
R = sum_user_rate_other / count;
#remove trace of similarity matrix
#User_Similarity = User_Similarity*abs(User_Similarity)**1.5
# P is predict matrix
P = R + W %*% (UI2-R) /apply(abs(W),1,sum);
D = P - UI;
RMSE = sum(apply(D*D,1,function(x) sum(x[!is.na(x)])))/sum(!is.na(D)*1)
result = list(predict = P,RMSE = RMSE);
return (result);
}
User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
for(i in c(1:dim(User_Similarity)[1])) { User_Similarity[i,i]=0; }
User_Similarity[is.na(User_Similarity)] = 0;
P = UBCF(UI);
P$predict
P$RMSE
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
#UI2 = UI;
#UI2[is.na(UI2)] = 0;
#UI
#tcrossprod(UI2)
#v %*% t(v)
#User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2);
#User_Similarity
UBCF <- function(UI,W){
#User_Similarity = as.matrix(1/dist(UI))
#User_Similarity[is.infinite(User_Similarity)] = 0;
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity = tcrossprod(UI2);
UI2 = UI;
UI2[is.na(UI2)] = 0;
#User_Similarity = as.matrix(1/dist(UI2));
count = apply(UI2, 1, function(x) sum(x!=0)) - (UI2!=0)*1;
sum_user_rate_other = apply(UI2, 1, function(x) sum(x[x!=0])) - UI2;
R = sum_user_rate_other / count;
#remove trace of similarity matrix
#User_Similarity = User_Similarity*abs(User_Similarity)**1.5
# P is predict matrix
P = R + W %*% (UI2-R) /apply(abs(W),1,sum);
D = P - UI;
RMSE = sum(apply(D*D,1,function(x) sum(x[!is.na(x)])))/sum(!is.na(D)*1)
result = list(predict = P,RMSE = RMSE);
return (result);
}
User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
for(i in c(1:dim(User_Similarity)[1])) { User_Similarity[i,i]=0; }
User_Similarity[is.na(User_Similarity)] = 0;
P = UBCF(UI,User_Similarity);
P$predict
P$RMSE
rm(list=ls());
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
#UI2 = UI;
#UI2[is.na(UI2)] = 0;
#UI
#tcrossprod(UI2)
#v %*% t(v)
#User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2);
#User_Similarity
UBCF <- function(UI,W){
#User_Similarity = as.matrix(1/dist(UI))
#User_Similarity[is.infinite(User_Similarity)] = 0;
#v = sqrt(apply(UI2*UI2,1,sum));
#User_Similarity = tcrossprod(UI2)/v %*% t(v);
#User_Similarity = tcrossprod(UI2);
UI2 = UI;
UI2[is.na(UI2)] = 0;
#User_Similarity = as.matrix(1/dist(UI2));
count = apply(UI2, 1, function(x) sum(x!=0)) - (UI2!=0)*1;
sum_user_rate_other = apply(UI2, 1, function(x) sum(x[x!=0])) - UI2;
R = sum_user_rate_other / count;
#remove trace of similarity matrix
#User_Similarity = User_Similarity*abs(User_Similarity)**1.5
# P is predict matrix
P = R + W %*% (UI2-R) /apply(abs(W),1,sum);
D = P - UI;
RMSE = sum(apply(D*D,1,function(x) sum(x[!is.na(x)])))/sum(!is.na(D)*1)
result = list(predict = P,RMSE = RMSE);
return (result);
}
User_Similarity = cor(x=t(UI), use ="pairwise.complete.obs",method = "pearson");
for(i in c(1:dim(User_Similarity)[1])) { User_Similarity[i,i]=0; }
User_Similarity[is.na(User_Similarity)] = 0;
P = UBCF(UI,User_Similarity);
P$predict
P$RMSE
cor(x=t(UI2), use ="pairwise.complete.obs",method = "pearson");
UI2 = UI;
UI2[is.na(UI2)] = 0;
cor(x=t(UI2), use ="pairwise.complete.obs",method = "pearson");
UI2 = UI;
UI2[is.na(UI2)] = 0;
User_Similarity2 = cor(x=t(UI2), use ="pairwise.complete.obs",method = "pearson");
for(i in c(1:dim(User_Similarity2)[1])) { User_Similarity2[i,i]=0; }
User_Similarity2
P = UBCF(UI,User_Similarity2);
P$predict
P$RMSE
P = UBCF(UI2,User_Similarity2);
P$predict
P$RMSE
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
Item_Similarity = cor(x=UI, use ="pairwise.complete.obs",method = "pearson");
View(Item_Similarity)
rm(list=ls());
U1 = c(4,NA,5,5);
U2 = c(4,2,1,NA);
U3 = c(3,NA,2,4);
U4 = c(4,4,NA,NA);
U5 = c(2,1,3,5);
UI = matrix(c(U1,U2,U3,U4,U5),nrow=5,ncol=4,byrow = T);
Item_Similarity = cor(x=UI, use ="pairwise.complete.obs",method = "pearson");
View(Item_Similarity)
View(Item_Similarity)
UI2 = UI;
UI2[is.na(UI2)] = 0;
apply(UI2, 2, function(x) sum(x!=0))
M = count = apply(UI2, 2, function(x) sum(x!=0)) - t((UI2!=0)*1);
M
M = apply(UI2, 2, function(x) sum(x!=0)) - t((UI2!=0)*1);
M
M = t(apply(UI2, 2, function(x) sum(x!=0)) - t((UI2!=0)*1));
M
count = t(apply(UI2, 2, function(x) sum(x!=0)) - t((UI2!=0)*1));
for(i in c(1:dim(Item_Similarity)[1])) { Item_Similarity[i,i]=0; }
Item_Similarity[is.na(Item_Similarity)] = 0;
Item_Similarity
UI
UI2
---
exit
library(rmarkdown); sessionInfo()
update.packages()
y
y
detach("package:rmarkdown", unload=TRUE)
library("knitr", lib.loc="~/Library/R/3.1/library")
install.packages(c("dplyr", "ggplot2", "stringr", "XML", "zoo"))
install.packages("swirl")
install.packages("devtools")
devtools::install_github(c("swirldev/swirl", "swirldev/swirlify"))
library("swirl")
library("swirl", lib.loc="~/Library/R/3.1/library")
library("swirl", lib.loc="~/Library/R/3.1/library")
swirl()
detach("package:swirl", unload=TRUE)
library("swirl", lib.loc="~/Library/R/3.1/library")
library("swirl", lib.loc="~/Library/R/3.1/library")
swirl()
5+7
x<- 5 +7
x
x - 3
y <- x-3
y
z <- c(1.1,9,3.14)
?C
?c
z
library("yaml", lib.loc="~/Library/R/3.1/library")
detach("package:swirl", unload=TRUE)
remove.packages(yaml)
install.packages(yaml)
install.packages("yaml")
install.packages("yaml")
uninstall.packages("knitr")
remove.packages("knitr")
install.packages("knitr")
remove.packages("rmarkdown")
install.packages("rmarkdown")
install.packages("rmarkdown")
render("/Users/aha/Dropbox/Project/2015/03_DSC/2014/R_ETL_LAB/index.Rmd", "all")
rmarkdown::render("/Users/aha/Dropbox/Project/2015/03_DSC/2014/R_ETL_LAB/index.Rmd", "all")
library("rmarkdown", lib.loc="~/Library/R/3.1/library")
rmarkdown::render("/Users/aha/Dropbox/Project/2015/03_DSC/2014/R_ETL_LAB/index.Rmd", "all")
library("yaml", lib.loc="~/Library/R/3.1/library")
rmarkdown::render("/Users/aha/Dropbox/Project/2015/03_DSC/2014/R_ETL_LAB/index.Rmd", "all")
detach("package:rmarkdown", unload=TRUE)
library("rmarkdown", lib.loc="~/Library/R/3.1/library")
rmarkdown::render("/Users/aha/Dropbox/Project/2015/03_DSC/2014/R_ETL_LAB/index.Rmd", "all")
clc
clear
cl
?
cat("\014")
af
cat("\014")
cat("\014")
---
install_github('Rexamine/stringi')
install.packages("stringi",type="mac.binary")
cat("\014")
cat("\014")
library(slidify)
install.packages("slidify")
library(devtools)
install_github('slidify', 'ramnathv')
install_github('slidifyLibraries', 'ramnathv')
author(â€œntuaha")
author("ntuaha")
author("ntuaha")
library(slidify)
author("ntuaha",deckdir="/Users/aha/Dropbox/Project/2015/03_DSC/2015",open_rmd=FALSE)
slidify("index.Rmd")
# replace USER and REPO with your username and reponame
publish(user = "ntuaha", repo = "R_ETL_DSC_2015", host = 'github')
author(deckdir="/Users/aha/Dropbox/Project/2015/03_DSC/2015",open_rmd=FALSE)
slidify("index.Rmd")
publish(user = "ntuaha", repo = "R_ETL_DSC_2015", host = 'github')
slidify("index.Rmd")
library("slidify")
slidify("index.Rmd")
install_version("stringr", version="0.6.2", type = "source")
slidify("index.Rmd")
slidify("index.Rmd")
